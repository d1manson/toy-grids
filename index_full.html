<html>
<head>
<script src="bower_components\webcomponentsjs\webcomponents-lite.min.js"></script>

<link rel="import" href="bower_components\polymer\polymer.html"/>
<link rel="import" href="bower_components\paper-toggle-button\paper-toggle-button.html"/>
<link rel="import" href="bower_components\paper-slider\paper-slider.html"/>
<link rel="import" href="bower_components\paper-button\paper-button.html"/>
<link rel="import" href="more-param.html"/>
<link rel="import" href="grid-elements.html"/>

<style>
	.noselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
	}
	body{
		margin: 10px;
		padding: 0;
	}
	.info{
		font-size: 0.8em;
		background: #f5f5f5;
		padding: 10px;
		margin-bottom: 10px;
		max-width: 800px;
		position: relative;
	}
	.info[hide_blurb]{
		display: none;
	}
	.params{
		margin-bottom: 40px;
	}
	.a_param{
		margin-bottom: 10px;
	}
	.param_caption{
		margin-right: 20px;
		font-family: Lucida Console;
		width: 180px;
		text-align: right;
	    display: inline-block;
		vertical-align: super;
	}
	.system_title{
		font-size: 1.3em;
	}
	.close_info{
		position:absolute;
		bottom:10px;
		right:2px;
		text-align:right;
		display:block
	}
	</style>
</head>
<body class="noselect">



<template is="dom-bind" id="main">

<more-param key='hide_blurb' value='{{hide_blurb}}' default='false' type='Boolean'></more-param>

<div class="info" hide_blurb$="[[hide_blurb]]">
This is a simple demonstration of the current <a href="http://www.scholarpedia.org/article/Grid_cells">grid cell</a> dogma, or at any rate it shows how I think grid cells operate.  Obviously it's just showing the 1D case, but roughly speaking the extension to 2D doesn't add that much mroe conceptually.  Also note that here we show a very small number of cells in each module, each of which is a binary on-off.  Obviously in practice there should be at least one or two orders of magnitude more cells, each of which has a Gaussian-ish activity profile, with vaugely Poission-like spiking probability.  
<br><br>
There are three parts to the page: the parameters bit; the cells bit; and the position estimate bit.  As you modify the parameters you will see the other two updating, note also that the url updates (so you can save or share specific parameter settings).  You can click on individual cells within a module to change which cell is active.   
<br><br>
There are possibly one or two (minorish) bugs, so watch out! 
<br><br>
The source is <a href="http://www.github.com/d1manson/toy-grids">available on GitHub</a> - you can fork it/follow me there.
<br><br>
-DM., Sep 2015.
<div class="close_info">
(sets "hide_blurb=true" in url)<br>
<paper-button raised id="close_info_button">close info</paper-button> 
</div>

</div>


<div class="params">
	<div class="a_param">
		<div class="param_caption">render_scaled</div>
		<paper-toggle-button checked="{{render_scaled}}"></paper-toggle-button>
		<more-param key='render_scaled' value='{{render_scaled}}' default='true' type='Boolean'></more-param>
	</div>
	<div class="a_param">
		<div class="param_caption">num_modules</div>
		<paper-slider pin value="{{num_modules}}" min="2" max="6"></paper-slider>
		<more-param key='num_modules' value='{{num_modules}}' default='3'></more-param>
	</div>
	<div class="a_param">
		<div class="param_caption">num_cells</div>
		<paper-slider pin value="{{num_cells}}" min="3" max="10"></paper-slider>
		<more-param key='num_cells' value='{{num_cells}}' default='5'></more-param>
	</div>
	<div class="a_param">
		<div class="param_caption">scale_factor</div>
		<paper-slider pin value="{{scale_factor}}" min="1.1" max="2" step="0.1"></paper-slider>
		<more-param key='scale_factor' value='{{scale_factor}}' default='1.4'></more-param>
	</div>
	<div class="a_param">
		<div class="param_caption">show_two_copies</div>
		<paper-toggle-button checked="{{show_two_copies}}"></paper-toggle-button>
		<more-param key='show_two_copies' value='{{show_two_copies}}' default='false' type='Boolean'></more-param>
	</div>
</div>


<template is="dom-if" if="[[show_two_copies]]"><div class="system_title">Grids in [state 1]:</div></template>
<grid-system render_scaled="[[render_scaled]]"
			 num_modules="[[num_modules]]"
			 num_cells="[[num_cells]]"
			 module_scale_factor="[[scale_factor]]"
			 active_color="#0f0"
			 modules="{{modules}}"></grid-system>

<br>
<position-estimate 
			 num_cells="[[num_cells]]"
			 modules="[[modules]]"></position-estimate>


<template is="dom-if" if="[[show_two_copies]]">
<br><br><br>
<div class="system_title">Grids in [state 2]:</div>
<grid-system render_scaled="[[render_scaled]]"
			 num_modules="[[num_modules]]"
			 num_cells="[[num_cells]]"
			 module_scale_factor="[[scale_factor]]"
			 active_color="#FFC906"
			 modules="{{modules_b}}"></grid-system>

<br>
<position-estimate 
			 num_cells="[[num_cells]]"
			 modules="[[modules_b]]"></position-estimate>

</template>


</template>

<script>
	var main = document.getElementById('main');
    main.addEventListener('dom-change', function() {
	
		document.getElementById('close_info_button').addEventListener('tap',function(){
			main.hide_blurb = true;
		});
  
  });
</script>
</body>
</html>